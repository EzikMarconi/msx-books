
МИКРОКОМПЬЮТЕР Yamaha MSX-2

                   Книга 1








      К.И.Фахрутдинов,
      И.И.Бочаров


 АРХИТЕКТУРА И УСТРОЙСТВА
МИКРОКОМПЬЮТЕРОВ СТАНДАРТА
          MSX-2
 


МИКРОКОМПЬЮТЕР Yamaha MSX-2

В трех книгах






      К.И.Фахрутдинов,
      И.И.Бочаров


 АРХИТЕКТУРА И УСТРОЙСТВА
МИКРОКОМПЬЮТЕРОВ СТАНДАРТА
          MSX-2












Владивосток
Издательство Дальневосточного университета
1993
 

ББК
    
УДК 681.325.5-181.4


    Рекомендовано комитетом народного образования Приморского
    края в качестве практического пособия

                            Рецензенты:
      Лаборатория информатики Института повышения квалификации
      учителей (зав. лаб.                                    ),
                 
      
      

                       Печатается по решению
               редакционно-издательского совета ДВГУ



        Фахрутдинов К.И., Бочаров И.И.
           Микрокомпьютер Yamaha MSX-2: Практ. пособие: В 3-х кни-
        гах/ Кн.1: Архитектура и устройства микрокомпьютеров стан-
        дарта MSX-2.- Владивосток:  Издательство Дальневосточного
        университета, 1993.- 146 с.
           ISBN 

            В  учебном  пособии  рассмотрены   общие   структурные
         свойства  и   особенности   архитектуры   микрокомпьютера
         стандарта    MSX-2,    описаны    микропроцессор     Z80,
         видеопроцессор,      программируемый      звукогенератор,
         организация различных типов памяти и видеопамяти, форматы
         памяти на магнитных дисках  и  лентах,  энергонезависимая
         память и другие устройства системы.
            В приложениях приводится информация,  необходимая  при
         работе   на   компьютере,   и   в   особенности   -   для
         программирующих на языке ассемблера Z80 или  INTEL8080  в
         системе MSX-2.
            Книга будет полезна всем, кто работает, преподает  или
         учится на компьютерах YAMAHA MSX-1, MSX-2 и их аналогах.

          
──────────                                               ББК 
       

ISBN 
                                                   C  Издательство
                                     Дальневосточного университета
                                                              1993
 














                   МИКРОКОМПЬЮТЕР Yamaha MSX-2
                          В трех книгах
                                
                             Книга 1
                                
                                
                        К.И.Фахрутдинов,
                           И.И.Бочаров
                                
                    АРХИТЕКТУРА И УСТРОЙСТВА
                   МИКРОКОМПЬЮТЕРОВ СТАНДАРТА
                              MSX-2
                                
                                
                     Редактор  И.А. Пяткова
              Художественный редактор О.П. Крайнов
                 Технический редактор И.В. Шпинь
                     Корректор Л.П. Конарева







                                

















                            ИБ N 

Подписано в печать   .  .199  .Формат 60x84/16. Бумага тип N 3.
Усл. печ. л.   ,   . Уч.-изд. л.   ,  . Тираж       экз.
Цена      р.  Заказ

         Издательство Дальневосточного университета,
         690600, г. Владивосток, ул. Октябрьская, 27
         Полиграфический комбинат Управления издательств,
         полиграфии и книжной торговли Приморского крайисполкома
         690600, г. Владивосток, Океанский проспект, 69






                               
 



                   ВВЕДЕНИЕ

   Прошло  уже  более  пяти  лет  с   тех   пор,   как   различная
вычислительная техника стала широко внедряться в  средние  учебные
заведения. Приморский край занял одно из ведущих мест в стране  по
компьютеризации школы. Накоплен большой опыт и различные материалы
по  обучению  информатике  и  другим  предметам  и  по  разработке
программного обеспечения для школьных компьютеров.
   Классы   компьютеров   YAMAHA   MSX-1   и   MSX-2    достаточно
распространены  в  стране  и  крае,  однако   хорошей   и   полной
технической  документации  по  этой  системе   очень   мало.   Это
сдерживает разработку программного обеспечения.
   В  предлагаемом  Вашему  вниманию  учебном  пособии  собраны  и
систематизированы многие полезные сведения об  архитектуре  MSX-2.
Большинство источников информации  о  системе  труднодоступны  для
пользователей,  часть  источников,  к  сожалению  -   неизвестного
авторам происхождения.
   В   приложениях   приводится   информация,   необходимая    для
программирующих на языке ассемблера Z80 или INTEL8080  -  описание
рабочих областей BDOS и  BIOS,  портов  ввода/вывода,  подпрограмм
BIOS, BDOS и интерпретатора языка  MSX-BASIC,  сетевых  функций  и
регистров видеопроцессора.
   Во второй нашей книге описан язык ассемблера  Z80.  На  большом
количестве примеров показано, как  можно,  программируя  на  языке
ассемблера,   управлять   работой   всех   устройств   компьютера,
рассмотренных в той книге, что сейчас перед Вами.
   Материалы  книг  использовались  при  обучении  школьников   по
специальности    "Программирование",    переподготовке    учителей
информатики,  в  спецкурсах  по  архитектуре  микрокомпьютеров  на
математическом факультете Дальневосточного университета.
   Авторы благодарны  Д.В.Симончику,  который  внимательно  изучил
рукопись и сделал ряд ценных замечаний и поправок.


                                3  

           1. Общие сведения об архитектуре MSX-2

   Система MSX является  стандартом  восьмиразрядного  (школьного)
компьютера. Она появилась осенью 1983 г., а к декабрю 1985 г. было
продано более миллиона компьютеров MSX.
   Система MSX-2 была объявлена в мае 1985  г.  Она  имеет  полную
совместимость снизу вверх с MSX (MSX-1).
   В СССР были поставлены классы  учебной  вычислительной  техники
КУВТ  (MSX)   и   КУВТ-2   (MSX-2),   объединенные   в   локальные
вычислительные  сети,  которые   комплектовались,   в   частности,
компьютерами учителя "YAMAHA yis805/128" и  компьютерами  учеников
"YAMAHA yis503/III" для КУВТ-2 и компьютерами  "YAMAHA  yis503/II"
для КУВТ.

         Основные устройства системы MSX:
1. Микропроцессор (CPU) Z-80A;
2. Видеопроцессор (VDP) V9938 MSX VIDEO (совместимый  с  TMS-9918A
   в MSX-1);
3. Микросхемы периферийного  программируемого параллельного интер-
   фейса (PPI) Intel 8255 и последовательного  интерфейса RS 232C;
4. Программируемый генератор звуков (PSG) AY-2-8910;
5. Память:
                                MSX         MSX-2
         MSX BASIC, BIOS (ROM)  32K           48K
         Оперативная (RAM)      64K          128K
         Видео (VRAM)           16K          128K
         Видео для регистров
           ввода/вывода (ERAM)   -            64K
         Сетевая (NROM)         16K           32К
         Сетевая (NRAM)          -             2K
 6. Порты ввода/вывода;
 7. Шины данных, адреса, управления;
 8. Клавиатура;
 9. Печатающее  устройство  (принтер)  "GEMINI-10XR/15XR"   или
    "NL-10", либо любой другой MSX-принтер.
10. Дисководы для флоппи-дисков MF-2DD (MF-1DD);
11. Мышь;
12. Джойстик;
13. Плоттер;
14. Магнитофон.
                                4  

   Кроме  этого,  стандартные  устройства  MSX  включают  в   себя
драйверы   лазерных   дисков,   VTR,   контроллеры   синтезаторов,
видеосистемы, контроллеры роботов, температуры, различные адаптеры
для модемов и телефонных линий.
   Функциональную  схему  системы  можно   представить   следующим
образом:
 T16 >
Память   Процессор   Порты  Устройства           Устройства

            ┌─────────────────┬──────┐
            │                 │      │
            │         ┌─┐ ┌───┴────┐ │        ┌────────────┐
            │      ┌──┤ ├─┤ Маппер │ │        │ Клавиатура │
            │      │  └─┘ └────────┘ │        │ Магнитофон │
            │      │  ┌─┐  Периферийный       │ Индикаторы │
            │      ├──┤ ├─ интерфейс (PPI)  ──┤ Динамик    │
 ┌─────┐    │      │  └─┘                     │ Мышь       │
 │ RAM ├─┐  │      │  ┌─┐                     │ Джойстик   │
 └─────┘ ├──┘      ├──┤ ├─  ...  ...          │ Часы       │
 ┌─────┐ │ ┌─────┐ │  └─┘                     └────────────┘
 │ ROM ├─┤ │     │ │  ┌─┐ ┌─────────┐
 └─────┘ │ │ CPU │ ├──┤ ├─┤ Принтер │         ┌────────────┐
         ├─┤ Z80 ├─┤  └─┘ └─────────┘         │  Таймер    │
┌──────┐ │ │     │ │  ┌─┐                     ├────────────┤
│ NRAM ├─┤ │     │ ├──┤ ├─ RS232C ────────────┤ Компьютеры │
└──────┘ │ └─────┘ │  └─┘                     └────────────┘
┌──────┐ ├──┐      │  ┌─┐ ┌──────────────┐    ┌──────┐
│ NROM ├─┘  │      ├──┤ ├─┤Видеопроцессор├──┬─┤ VRAM │
└──────┘    │      │  └─┘ └──────────────┘  │ └──────┘
            │      │  ┌─┐                   │ ┌──────┐
            │      ├──┤ ├─  ...  ...        ├─┤ ERAM │
            │      │  └─┘                   │ └──────┘
            │      │                        │ ┌───────┐
            │      │                        └─┤Дисплей│
            │      │                          └───────┘
            │      │  ┌─┐ ┌───────────────┐      ┌─────────┐
            │      └──┤ ├─┤ Звукогенератор├──────┤ Динамик │
            │         └─┘ └───────────────┘      └─────────┘
            │    ┌──────────┐                     ┌──────────┐
            └────┤ Драйверы ├─────────────────────┤ Дисковод │
                 └──────────┘                     └──────────┘

   Основное устройство системы - микропроцессор Z-80. Он выполняет
все арифметические, логические и управляющие  операции.  Подробнее
его характеристики будут рассмотрены ниже.  При  работе  процессор
обменивается данными с памятью или с устройствами ввода/вывода.
   Видеопроцессор  управляет  выводом   на   экран   текстовой   и
графической информации.
   Системные  шины   представляют   собой   набор   соединительных
проводников-линий,   объединяющих    одноименные    выводы    всех
периферийных модулей. По каждой линии может быть передано значение
одного разряда двоичного кода. По роду передаваемой информации все
линии разделены  на  три  группы,  образующие  шину  данных,  шину
адресов и шину управления.
   Характерной    особенностью    шины    данных    является    ее
двунаправленность  (т.е.  возможность  передачи  данных  в  разные
моменты времени в различных направлениях).
                                5  

